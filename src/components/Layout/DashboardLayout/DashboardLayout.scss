@use '../../../styles/variables' as *;
@use '../../../styles/mixins' as *;

.bm-layout-wrapper {
  min-height: 100vh;
  background: var(--color-background-secondary);
}

.bm-main-area {
  min-height: calc(100vh - 20px);
  transition: margin-left 0.2s ease;
  padding: 10px;
  padding-top: 58px;
  height: calc(100vh - 68px);
}

.bm-page-container {
  min-height: calc(100vh - 68px);
  @include custom-scrollbar;
}

body.dark-mode {
  .bm-layout-wrapper {
    background: var(--color-background);
  }
}

// ═══════════════════════════════════════════════════════════════
// Full-screen Splash Overlay — appears on every page refresh
// ═══════════════════════════════════════════════════════════════

.bm-app-splash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 99999;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-background, #ffffff);
  overflow: hidden;

  body.dark-mode & {
    background: var(--color-background, #0f1923);
  }
}

.bm-app-splash-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  animation: splashContentEnter 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes splashContentEnter {
  0% {
    opacity: 0;
    transform: scale(0.85) translateY(20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.bm-app-splash-logo {
  animation: splashLogoFloat 2s ease-in-out infinite;
}

@keyframes splashLogoFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

.bm-app-splash-brand {
  display: flex;
  align-items: baseline;
  font-size: 42px;
  font-weight: 800;
  letter-spacing: -0.5px;
  line-height: 1;
  margin-top: 8px;
}

.bm-app-splash-space {
  width: 10px;
  display: inline-block;
}

.bm-app-splash-bharat {
  color: #1a3c5e;
  opacity: 0;
  animation: splashWordIn 0.5s ease-out 0.3s forwards;

  body.dark-mode & {
    color: #ffffff;
  }
}

.bm-app-splash-mithra {
  color: #d4a010;
  opacity: 0;
  animation: splashWordIn 0.5s ease-out 0.55s forwards;
}

@keyframes splashWordIn {
  0% {
    opacity: 0;
    transform: translateY(15px);
    filter: blur(4px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

.bm-app-splash-tagline {
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--color-text-secondary, #6b7b8d);
  opacity: 0;
  animation: splashTagIn 0.5s ease-out 0.8s forwards;
  margin: 0;
}

@keyframes splashTagIn {
  0% { opacity: 0; letter-spacing: 8px; }
  100% { opacity: 1; letter-spacing: 3px; }
}

.bm-app-splash-dots {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 16px;
  opacity: 0;
  animation: splashTagIn 0.4s ease-out 1s forwards;
}

.bm-app-splash-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #d4a010;
  animation: splashDotBounce 1.2s ease-in-out infinite;

  &:nth-child(1) { animation-delay: 0s; background: #1a3c5e; }
  &:nth-child(2) { animation-delay: 0.2s; background: #2d7d9a; }
  &:nth-child(3) { animation-delay: 0.4s; background: #d4a010; }

  body.dark-mode & {
    &:nth-child(1) { background: #4a9eda; }
    &:nth-child(2) { background: #2dd4a8; }
    &:nth-child(3) { background: #d4a010; }
  }
}

@keyframes splashDotBounce {
  0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
  40% { transform: scale(1.2); opacity: 1; }
}

// ── Exit animation variants (one picked randomly) ──

// 1. Zoom out — entire splash zooms out and fades
.splash-var-zoom-out.bm-app-splash--exit {
  animation: exitZoomOut 1s cubic-bezier(0.55, 0, 0.1, 1) forwards;
}

@keyframes exitZoomOut {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.5); }
}

// 2. Split reveal — splits vertically, left goes left, right goes right
.splash-var-split-reveal.bm-app-splash--exit {
  &::before,
  &::after {
    content: '';
    position: absolute;
    top: 0;
    width: 50%;
    height: 100%;
    background: inherit;
    z-index: 1;
  }
  &::before {
    left: 0;
    animation: exitSplitLeft 0.9s cubic-bezier(0.55, 0, 0.1, 1) forwards;
  }
  &::after {
    right: 0;
    animation: exitSplitRight 0.9s cubic-bezier(0.55, 0, 0.1, 1) forwards;
  }
  .bm-app-splash-content {
    animation: exitFadeScale 0.5s ease-out forwards;
  }
}

@keyframes exitSplitLeft {
  0% { transform: translateX(0); }
  100% { transform: translateX(-105%); }
}

@keyframes exitSplitRight {
  0% { transform: translateX(0); }
  100% { transform: translateX(105%); }
}

@keyframes exitFadeScale {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(0.8); }
}

// 3. Circle expand — a circle mask expands from center, revealing app behind
.splash-var-circle-expand.bm-app-splash--exit {
  animation: exitCircleExpand 1s cubic-bezier(0.55, 0, 0.1, 1) forwards;
}

@keyframes exitCircleExpand {
  0% {
    clip-path: circle(100% at 50% 50%);
    opacity: 1;
  }
  100% {
    clip-path: circle(0% at 50% 50%);
    opacity: 1;
  }
}

// 4. Slide up reveal — whole splash slides up
.splash-var-slide-up-reveal.bm-app-splash--exit {
  animation: exitSlideUp 0.9s cubic-bezier(0.55, 0, 0.1, 1) forwards;
}

@keyframes exitSlideUp {
  0% { transform: translateY(0); }
  100% { transform: translateY(-100%); }
}

// 5. Blur reveal — blurs out and fades
.splash-var-blur-reveal.bm-app-splash--exit {
  animation: exitBlurReveal 0.9s ease-out forwards;
}

@keyframes exitBlurReveal {
  0% { opacity: 1; filter: blur(0); }
  50% { opacity: 0.8; filter: blur(8px); }
  100% { opacity: 0; filter: blur(20px); }
}

// 6. Rotate fade — slight rotation with fade
.splash-var-rotate-fade.bm-app-splash--exit {
  animation: exitRotateFade 0.9s cubic-bezier(0.55, 0, 0.1, 1) forwards;
  transform-origin: center center;
}

@keyframes exitRotateFade {
  0% { opacity: 1; transform: scale(1) rotate(0deg); }
  100% { opacity: 0; transform: scale(0.7) rotate(5deg); }
}
